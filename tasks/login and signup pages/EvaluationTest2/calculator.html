<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      .example {
        background-color: #eee;
        width: 100%;
        height: 100px;
        margin-top: 5%;
        margin-bottom: 5%;
        border: 1px dotted black;
        font-weight: 400;
        overflow-y: scroll; /* Add the ability to scroll */
      }

      /* Hide scrollbar for Chrome, Safari and Opera */
      .example::-webkit-scrollbar {
        display: none;
      }

      /* Hide scrollbar for IE, Edge and Firefox */
      .example {
        -ms-overflow-style: none; /* IE and Edge */
        scrollbar-width: none; /* Firefox */
      }
      .box-shadow1,
      .box-shadow2 {
        transition: all 0.1s ease-in-out;
        box-shadow: -2px 0 gray, /* left */ 0 -2px gray, /* top */ 2px 0 gray,
          /* right */ 0 4px gray; /* bottom */
      }
      .box-shadow1:hover,
      .box-shadow2:hover {
        box-shadow: none;
      }
    </style>
  </head>
  <body
    style="
      display: flex;
      width: 100vw;
      height: 100vh;
      align-items: center;
      justify-content: center;
    "
  >
    <form style="width: 40%" class="bg-dark">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <p
              class="text-end bg-white text-dark display-5 example"
              contenteditable="true"
              id="ans"
            >
              Calculator
            </p>
          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <button
              type="button"
              class="box-shadow1 btn btn-outline-primary btnFun text-center"
              style="width: 100%; margin-bottom: 20%"
              value="ac"
            >
              AC
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow1 btn btn-outline-primary btnFun text-center"
              style="width: 100%; margin-bottom: 20%"
              value="del"
            >
              DEL
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow1 btn btn-outline-primary btnFun text-center"
              style="width: 100%; margin-bottom: 20%"
              value="%"
            >
              %
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow1 btn btn-outline-primary btnFun text-center"
              style="width: 100%; margin-bottom: 20%"
              value="+"
            >
              +
            </button>
          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <button
              type="button"
              class="box-shadow2 btn btn-outline-secondary btnNum text-center"
              style="width: 100%; margin-bottom: 20%"
              value="7"
            >
              7
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow2 btn btn-outline-secondary btnNum text-center"
              style="width: 100%; margin-bottom: 20%"
              value="8"
            >
              8
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow2 btn btn-outline-secondary btnNum text-center"
              style="width: 100%; margin-bottom: 20%"
              value="9"
            >
              9
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow1 btn btn-outline-primary btnFun text-center"
              style="width: 100%; margin-bottom: 20%"
              value="-"
            >
              -
            </button>
          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <button
              type="button"
              class="box-shadow2 btn btn-outline-secondary btnNum text-center"
              style="width: 100%; margin-bottom: 20%"
              value="4"
            >
              4
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow2 btn btn-outline-secondary btnNum text-center"
              style="width: 100%; margin-bottom: 20%"
              value="5"
            >
              5
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow2 btn btn-outline-secondary btnNum text-center"
              style="width: 100%; margin-bottom: 20%"
              value="6"
            >
              6
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow1 btn btn-outline-primary btnFun text-center"
              style="width: 100%; margin-bottom: 20%"
              value="*"
            >
              *
            </button>
          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <button
              type="button"
              class="box-shadow2 btn btn-outline-secondary btnNum text-center"
              style="width: 100%; margin-bottom: 20%"
              value="1"
            >
              1
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow2 btn btn-outline-secondary btnNum text-center"
              style="width: 100%; margin-bottom: 20%"
              value="2"
            >
              2
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow2 btn btn-outline-secondary btnNum text-center"
              style="width: 100%; margin-bottom: 20%"
              value="3"
            >
              3
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow1 btn btn-outline-primary btnFun text-center"
              style="width: 100%; margin-bottom: 20%"
              value="/"
            >
              /
            </button>
          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <button
              type="button"
              class="box-shadow2 btn btn-outline-secondary btnNum text-center"
              style="width: 100%; margin-bottom: 20%"
              value="0"
            >
              0
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow2 btn btn-outline-secondary btnNum text-center"
              style="width: 100%; margin-bottom: 20%"
              value="."
            >
              .
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow1 btn btn-outline-primary btnFun text-center"
              style="width: 100%; margin-bottom: 20%"
              value="+/-"
            >
              +/-
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              class="box-shadow1 btn btn-outline-primary btnFun text-center"
              style="width: 100%; margin-bottom: 20%"
              value="equal"
            >
              =
            </button>
          </div>
        </div>
      </div>
    </form>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>
    <script>
      setTimeout(() => {
        let ans = document.getElementById("ans");
        let fucBtns = document.getElementsByClassName("btnFun");
        let numBtns = document.getElementsByClassName("btnNum");
        ans.textContent = "";

        const operators = ["+", "-", "*", "/", "%"];

        for (let btn of fucBtns) {
          if (
            btn.value == "ac" ||
            btn.value == "del" ||
            btn.value == "equal" ||
            btn.value == "+/-"
          ) {
            switch (btn.value) {
              case "equal":
                btn.addEventListener("click", function () {
                  // console.log("ans", ans.textContent);
                  ans.textContent = eval(ans.textContent);
                });
                break;
              case "ac":
                btn.addEventListener("click", function () {
                  // console.log("ans", ans.textContent);
                  ans.textContent = "";
                });
                break;
              case "del":
                btn.addEventListener("click", function () {
                  let len = ans.textContent.length;
                  // console.log("ans", ans.textContent.slice(0, len - 1));
                  ans.textContent = ans.textContent.slice(0, len - 1);
                });
                break;
              case "+/-":
                btn.addEventListener("click", function () {
                  let char = ans.textContent.trim()[0];
                  if (char == "-") {
                    ans.textContent = ans.textContent.slice(1);
                  } else {
                    ans.textContent = "-" + ans.textContent;
                  }
                  // console.log("ans", char);
                });
                break;

              default:
                break;
            }
            continue;
          }

          btn.addEventListener("click", function () {
            let lastChar = ans.textContent.trim().slice(-1);

            // Prevent adding operator after another operator
            if (operators.includes(lastChar)) return;

            // Prevent adding operator at the beginning
            if (ans.textContent.trim() === "") return;

            ans.textContent += " " + this.value + " ";
          });
        }

        for (let btn of numBtns) {
          btn.addEventListener("click", function () {
            let value = this.value;

            if (value === ".") {
              let current = ans.textContent.trim();
              let lastSegment = current
                .split(/[\+\-\*\/%]/)
                .pop()
                .trim();

              // Prevent dot if already present in current number
              if (lastSegment.includes(".")) return;

              // Prevent starting input with dot
              if (lastSegment === "") return;
            }

            ans.textContent += value;
          });
        }
      }, 3000);
    </script>
  </body>
</html>
